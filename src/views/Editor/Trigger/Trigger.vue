<template>
  <Accordion :steps="steps" />
</template>

<script setup>
import { shallowRef, inject } from 'vue';
import SelectChain from '@/views/Editor/Trigger/SelectChain.vue';
import SelectEvent from '@/views/Editor/Trigger/SelectEvent.vue';
import Filters from '@/views/Editor/Trigger/Filters.vue';
import TestFilter from '@/views/Editor/Trigger/TestFilter.vue';
import Accordion from '@/components/Accordion.vue';

const steps = shallowRef([
  { title: 'Select Chain', name: '1', component: SelectChain },
  { title: 'Select Event', name: '2', component: SelectEvent },
  { title: 'Filter Setup', name: '3', component: Filters },
  // { title: 'Test Filter', name: '4', component: TestFilter, isDisabled: true }, // TODO: Test filter in phase 3
]);

/* TODO: phase 3
const eventBus = inject('eventBus');
eventBus.on('toggleTestFilter', ({ isDisabled }) => {
  steps.value = [...steps.value.slice(0, 3), { ...steps.value[3], isDisabled }];
  // shallowRef can only update data in this way, check vue 3 docs
  // https://vuejs.org/guide/best-practices/performance.html#reduce-reactivity-overhead-for-large-immutable-structures
});
*/
</script>

<style lang="scss"></style>
